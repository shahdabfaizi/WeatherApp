<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="java.js" type="module"></script>
    <link rel="stylesheet" href="style/style.css" />
    <title>Document</title>
  </head>
  <body>
    <main>
      <div id="weaterInformation">
        <div class="weaterInformation__buttons">
          <div class="menu-btn" id="menu-btn">
            <div class="menu-btn__burger"></div>
          </div>
          <nav class="nav" id="nav">
            <ul class="nav__list" id="cityList">
              <li class="nav__item"><a href="#" class="nav__link">Home</a></li>
            </ul>
          </nav>
          <form action="" class="search-bar">
            <input type="search" name="search" pattern=".*\S.*" required />
            <button class="search-btn" type="submit">
              <span>Search</span>
            </button>
          </form>
          <div class="city-display">
            <button id="saveCityBtn">Stadt speichern</button>
          </div>
        </div>
        <!-- Aktuelle CityName, Temperatur, Wetter, Höchste & Tiefste -->
        <div class="mainView">
          <h1 id="CityName"></h1>
          <div id="img"></div>
          <h3 id="temperature"></h3>
          <h6 id="infoNew"></h6>
          <h3 id="time"></h3>
        </div>
        <!-- gesammt verlauf von dem ganzen tag uhrzeiten, wetterbedinungen, und gradzahlen -->
        <div id="courseOfDay">
          <div id="forecast"></div>
        </div>

        <div id="forecastDays">
          <div id="day1">
            <h3 id="day1-date"></h3>
            <div id="day1-icon"></div>
            <p id="day1-temp"></p>
            <p id="day1-condition"></p>
          </div>
          <div id="day2">
            <h3 id="day2-date"></h3>
            <div id="day2-icon"></div>
            <p id="day2-temp"></p>
            <p id="day2-condition"></p>
          </div>
          <div id="day3">
            <h3 id="day3-date"></h3>
            <div id="day3-icon"></div>
            <p id="day3-temp"></p>
            <p id="day3-condition"></p>
          </div>
        </div>
        <!-- gefühlt °, Luftqu, wind, luftfeuchtigkeit-->
        <div id="moreInfo"></div>
      </div>
    </main>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const menuBtn = document.getElementById("menu-btn");
        const nav = document.getElementById("nav");
        const navLinks = document.querySelectorAll(".nav__link");

        menuBtn.addEventListener("click", () => {
          menuBtn.classList.toggle("open");
          nav.classList.toggle("open");
        });

        navLinks.forEach((link) => {
          link.addEventListener("click", () => {
            menuBtn.classList.remove("open");
            nav.classList.remove("open");
          });
        });
      });

      document.addEventListener("DOMContentLoaded", () => {
        let currentSlide = 0;
        const slides = document.querySelectorAll(".slide");
        const totalSlides = slides.length;

        function showSlide(index) {
          slides.forEach((slide, i) => {
            slide.style.display = i === index ? "block" : "none";
          });
        }

        function nextSlide() {
          currentSlide = (currentSlide + 1) % totalSlides;
          showSlide(currentSlide);
        }

        showSlide(currentSlide);
        setInterval(nextSlide, 5000);
      });

      document
        .getElementById("saveCityBtn")
        .addEventListener("click", function () {
          const cityName = document.getElementById("CityName").innerText;
          let savedCities =
            JSON.parse(localStorage.getItem("savedCities")) || [];

          if (!savedCities.includes(cityName)) {
            savedCities.push(cityName);
            localStorage.setItem("savedCities", JSON.stringify(savedCities));
            updateCityList();
          }
        });

      function updateCityList() {
        const cityList = document.getElementById("cityList");
        let savedCities = JSON.parse(localStorage.getItem("savedCities")) || [];

        cityList.innerHTML = `
    <li class="nav__item"><a href="#" class="nav__link">Home</a></li>
  `;

        savedCities.forEach((city) => {
          let listItem = document.createElement("li");
          listItem.classList.add("nav__item");
          listItem.innerHTML = `<a href="#" class="nav__link">${city}</a>`;
          cityList.appendChild(listItem);
        });
      }

      window.onload = function () {
        updateCityList();
      };
    </script>
  </body>
</html>
